how to use an what result you can get（スクリプトの使い方 & 得られる結果の見方）


A. カメラ・FPS・露光・ブラーのチューニング用（camera_fps_exposure.py）

=> 何をするスクリプト？

・USBカメラを指定解像度/フレームレートで開き、測定FPSと**ブラー指標（Laplacian/ Tenengrad）**を画面OSDに重ね表示。

・露光（Exposure）を手動で切り替え（1/120, 1/250, 1/500 など）し、オート露光ON/OFFも切替可能。FPSやブラーに応じて警告を出してくれます。

・起動例（デバイス /dev/video2, 960×540 @60FPS で開始）


"""
python3 camera_fps_exposure.py --dev 2 --w 960 --h 540 --fps 60 --exposures "0.008333,0.004,0.002"
# Space: 露光プリセットを順送り
# 1/2/3: それぞれの露光プリセットに直ジャンプ
# A: オート露光 ON/OFF トグル
# Q: 終了
"""

=> 表示/操作のポイント

・画面左上に FPS(measured)、Exposure(1/xxx s)、Blur (Laplacian/Tenengrad) が出ます。

・スクリプトは最近の計測から上位20%の中央値を“ベースライン”とし、現在値/ベースライン比が低いと「ブラー警告」を出す設計（目安0.3未満で警告）。FPSが40未満でも警告。
・露光は手動値（秒指定）や log2秒表現でベストエフォート設定、オート露光トグルも備えています。

=> 結果の読み方（追跡用チューニング）

・FPS：実測が40fps以上を目安（60fpsなら尚良）。40未満が続くとレイテンシ体感が悪化。

・ブラー比：パン/トラック中にブラー比が0.3未満へ頻繁に落ちるなら露光が長過ぎ。短い露光（1/250〜1/500s）に切り替え→ブラー警告が減り、モーションブラー由来の遅れや追従のヨレが減ります。

・レイテンシ視点：このスクリプトは“カメラ側”の遅延要因（露光時間 + ドライバ + FPS）を圧縮するための前処理チューニングです。最終的な「画像→角度→サーボ」のパイプライン遅延は、ここで短露光&高FPSに追い込んだ後、px側のログで “画像受信→角度発行→シリアル送信” のタイムスタンプ比較で評価します。



B. サーボのバックラッシュ/最小可動角の実測用（gui_backlash_test.py）

=> 何をするスクリプト？

・Arduinoシリアル（既定 /dev/ttyACM0, 115200bps）に角度コマンドを送り、スライダ操作や小刻み±ステップ試験でサーボの静止摩擦/内部デッドバンドやバックラッシュを目視体感で測るGUIツール。

・プロトコル（整数角のみ or 小数角送信）、**角度反転（180-angle）**を切替可能。Center/Step/Dwell/Cyclesを入力して「Start Test」を押すと、**中心→＋step→中心→−step→中心…**を繰り返して反応を確かめられます。

起動例
"""
python3 gui_backlash_test.py
# つながらない場合は ARDUINO_PORT を編集（冒頭の定数）
# INTEGER_PROTOCOL / INVERT_ANGLE の切替も冒頭の定数で指定
"""

=> 使い方/結果の見方
・Manual Angle スライダで感触を確認 → 「Go Center」で90°へ。

・Step(deg) = 0.5, Dwell(ms)=400 などでStart Test。0.5°指令で動かなければ「最小可動角が0.5°より大」の可能性。1.0°なら動く → 内部デッドバンド or 静止摩擦がその程度という判断。

・オーバーシュート/ガチャつきが出るならバックラッシュやコントローラの最小/最大ステップ不整合を疑い、px側の**deadband_px/step_min_deg/step_max_degを見直します。送信は整数/小数や反転**にも対応（Arduino 側の実装に合わせて選択）。


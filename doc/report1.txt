### skills (2025/10/23)

# used tec

## 制御ロジック／追従（Control）
・[角度クランプ] — 指令角を機械範囲（min–max）に収め安全性を担保。

・[状態機械（FSM）] — DETECT→TRACK↔CENTERED／LOST→SEEK といった明確な遷移で挙動を安定化。

・幾何・座標変換（Geometry）
[deg/px 変換（FOV幾何）] — deg_per_px = HFOV / 画素幅 で誤差pxを角度に換算。

・[レターボックス補正] — 推論のパディング座標を元画像座標へ戻して正確に制御。

## 画像処理・トラッキング（Vision）
・[BBox中心計算] — (x1+x2)/2, (y1+y2)/2 で被写体中心を算出。

・[トラッカー併用（YOLO＋CSRT/KCF）] — 検出の合間を短期トラッカーで補完して中心安定。

## ハードウェア／シリアル（HW/Serial）
・[Telemetrix/Telemetrix4Arduino] — Arduino 側に汎用I/Oサーバ、ホストは Telemetrix で servo_write。

・[最小可動角・バックラッシュ実測] — 動き出し閾値と戻りガタを GUI で計測し設定に反映。

・[サーボ端点キャリブレーション] — µs 幅を実測で最適化し 0–180°へ安全マップ。
clamp 処理

・工学的処理でdeeptrackPX4でもやった。

# ROS 2／実装アーキテクチャ（ROS/Arch）

・[MultiThreadedExecutor(4)] — 待機スレッドとコールバックを並列化しデッドロック回避（Jetson Nano の4論理コア想定）。

・[ACKハンドシェイク] — /inference 発行後に /px3_ack を待つロックステップ（早着即時復帰＋上限タイムアウト）。lock_guardの並列処理

・[QoS選定] — px3_ready は TRANSIENT_LOCAL、他は基本 Reliable/Depth=10 程度。QOSのラッチでpx2とpx3のノードを同時に始める。
 

# tried but fialed so unused tec (no effective)

・[スルーレート制限] — 角度の最大変化速度（°/s）を制限し、急峻な指令での振動や見失いを防ぐ。

・[加速度制限] — 角速度の変化（°/s²）を抑え、起動・停止を滑らかにする。

・[最終段ローパス（EMA）] — 角度指令に指数移動平均を掛けて最終的な滑らかさを確保。

・[バンバン制御] — 誤差の符号で「左/停止/右」の三値だけを出す簡易安定制御。
参考medium  ：https://medium.com/@bramburggraaf/real-time-object-tracking-with-python-yolov5-and-arduino-servo-control-follow-person-or-pet-ef0da07849d8

・[非線形tanh＋スルー] — step = step_max * tanh(k*error) で大誤差は強く・小誤差は微小に。

・[atan2ベースのピクセル→角度] — Δx/Δy を焦点距離で割った arctan で非線形に角度化（端で±FOV/2へ収束）。

・[内部パラメータ／キャリブレーション] — fx, fy, cx, cy と歪み係数を求め、マッピングの整合性を確保。

・[FOV再推定] — 実測ケースから fx/fy を平均化して HFOV/VFOV を更新。

・[増分制御] — servo <- servo + step の形で小刻みに更新（上限付き）。飽和時の張り付き回避にも有効。

# candidate for use

・[先読み制御（遅延補償）] — 誤差の変化傾向から先を外挿して追従遅れを補う。

・[デッドバンド] — 中心近傍の小誤差（±px/±deg）を無視してサーボのハンチングを抑える。

・[二段階ゲイン（ACQUIRE→TRACK）] — 初期は高ゲインで素早くセンタリング→安定後は低ゲイン。

・[背景差分] — 動体抽出の前処理強化（MOG2/KNN）。

・[構図グリッド] — 3×3 の任意交点をセットポイントにして中央以外の構図にも対応。

・[ジッター平滑] — 検出中心に EMA 等を適用してノイズ由来の揺れを抑える。

・[RANSAC／MAP推定] — 外れ値排除や確率的統合で頑健性を向上。

・[エンコーダ／IMU／電源] — 実角取得・外乱補正・電圧降下対策で安定化。

・[レンズ歪み補正] — undistort で幾何誤差を低減し px→deg 変換の精度を上げる。

・[coast＋スイープ探索] — 見失い時は慣性的に小パルス継続→それでもダメなら左右スイープで再捕捉。

・[線形補間] — 欠損フレームを直線でつなぎ自然に接続。

・[GPR/GSI] — ガウス過程回帰や補間＋平滑の複合で高品質な軌跡推定。

# untouched

・[ヒステリシス] — IN/OUT の二つの閾値で中央判定を行い、境界付近のチラつきを防止。

・[固定角ステップ（段階切替）] — 誤差大なら大きめ、誤差小なら小さめの一定角ステップを使い分ける。

・[近遠段階化] — BBox面積の大小でステップ量を段階切替（遠い＝大、近い＝小）。

・[PID制御] — P/PI/PD を状況に応じて使い分け、安定かつ高速に収束。

・[特徴点マッチング] — 再検出・テンプレート追従の堅牢化（ORB/AKAZE/SIFT 等）。

